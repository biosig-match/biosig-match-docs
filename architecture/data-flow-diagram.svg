<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.2 (20250808.2320)
 -->
<!-- Pages: 1 -->
<svg width="1547pt" height="969pt"
 viewBox="0.00 0.00 1547.00 969.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 964.5)">
<polygon fill="white" stroke="none" points="-4,4 -4,-964.5 1543.25,-964.5 1543.25,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="769.62" y="-937.5" font-family="Times New Roman,serif" font-size="20.00">Interactive Data Flow Diagram</text>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M323.62,-164C323.62,-164 415.62,-164 415.62,-164 421.62,-164 427.62,-170 427.62,-176 427.62,-176 427.62,-325 427.62,-325 427.62,-331 421.62,-337 415.62,-337 415.62,-337 323.62,-337 323.62,-337 317.62,-337 311.62,-331 311.62,-325 311.62,-325 311.62,-176 311.62,-176 311.62,-170 317.62,-164 323.62,-164"/>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-317.8" font-family="Times New Roman,serif" font-size="16.00">External Actors</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M318.62,-390C318.62,-390 421.62,-390 421.62,-390 427.62,-390 433.62,-396 433.62,-402 433.62,-402 433.62,-457 433.62,-457 433.62,-463 427.62,-469 421.62,-469 421.62,-469 318.62,-469 318.62,-469 312.62,-469 306.62,-463 306.62,-457 306.62,-457 306.62,-402 306.62,-402 306.62,-396 312.62,-390 318.62,-390"/>
<text xml:space="preserve" text-anchor="middle" x="370.12" y="-449.8" font-family="Times New Roman,serif" font-size="16.00">External Services</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M722.5,-390C722.5,-390 820.5,-390 820.5,-390 826.5,-390 832.5,-396 832.5,-402 832.5,-402 832.5,-457 832.5,-457 832.5,-463 826.5,-469 820.5,-469 820.5,-469 722.5,-469 722.5,-469 716.5,-469 710.5,-463 710.5,-457 710.5,-457 710.5,-402 710.5,-402 710.5,-396 716.5,-390 722.5,-390"/>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-449.8" font-family="Times New Roman,serif" font-size="16.00">Mobile Client</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_3</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M20,-734C20,-734 825,-734 825,-734 831,-734 837,-740 837,-746 837,-746 837,-910 837,-910 837,-916 831,-922 825,-922 825,-922 20,-922 20,-922 14,-922 8,-916 8,-910 8,-910 8,-746 8,-746 8,-740 14,-734 20,-734"/>
<text xml:space="preserve" text-anchor="middle" x="422.5" y="-902.8" font-family="Times New Roman,serif" font-size="16.00">API &amp; Data Ingestion</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_4</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1119.75,-650C1119.75,-650 1240,-650 1240,-650 1246,-650 1252,-656 1252,-662 1252,-662 1252,-811 1252,-811 1252,-817 1246,-823 1240,-823 1240,-823 1119.75,-823 1119.75,-823 1113.75,-823 1107.75,-817 1107.75,-811 1107.75,-811 1107.75,-662 1107.75,-662 1107.75,-656 1113.75,-650 1119.75,-650"/>
<text xml:space="preserve" text-anchor="middle" x="1179.88" y="-803.8" font-family="Times New Roman,serif" font-size="16.00">Backend Processing</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_5</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1131.88,-375C1131.88,-375 1226.88,-375 1226.88,-375 1232.88,-375 1238.88,-381 1238.88,-387 1238.88,-387 1238.88,-623 1238.88,-623 1238.88,-629 1232.88,-635 1226.88,-635 1226.88,-635 1131.88,-635 1131.88,-635 1125.88,-635 1119.88,-629 1119.88,-623 1119.88,-623 1119.88,-387 1119.88,-387 1119.88,-381 1125.88,-375 1131.88,-375"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-615.8" font-family="Times New Roman,serif" font-size="16.00">Storage Layer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_6</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1128.5,-187C1128.5,-187 1519.25,-187 1519.25,-187 1525.25,-187 1531.25,-193 1531.25,-199 1531.25,-199 1531.25,-348 1531.25,-348 1531.25,-354 1525.25,-360 1519.25,-360 1519.25,-360 1128.5,-360 1128.5,-360 1122.5,-360 1116.5,-354 1116.5,-348 1116.5,-348 1116.5,-199 1116.5,-199 1116.5,-193 1122.5,-187 1128.5,-187"/>
<text xml:space="preserve" text-anchor="middle" x="1323.88" y="-340.8" font-family="Times New Roman,serif" font-size="16.00">Management &amp; Export</text>
</g>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<g id="a_node1"><a xlink:title="System User">
<path fill="#e3f2fd" stroke="black" d="M384.62,-208C384.62,-208 354.62,-208 354.62,-208 348.62,-208 342.62,-202 342.62,-196 342.62,-196 342.62,-184 342.62,-184 342.62,-178 348.62,-172 354.62,-172 354.62,-172 384.62,-172 384.62,-172 390.62,-172 396.62,-178 396.62,-184 396.62,-184 396.62,-196 396.62,-196 396.62,-202 390.62,-208 384.62,-208"/>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-185.72" font-family="Arial" font-size="12.00">User</text>
</a>
</g>
</g>
<!-- SmartphoneApp -->
<g id="node4" class="node">
<title>SmartphoneApp</title>
<g id="a_node4"><a xlink:title="ユーザーインターフェースを提供し、ファームウェアとサーバー群を繋ぐ中継ハブ。">
<path fill="#e8f5e9" stroke="black" d="M812.5,-434C812.5,-434 730.5,-434 730.5,-434 724.5,-434 718.5,-428 718.5,-422 718.5,-422 718.5,-410 718.5,-410 718.5,-404 724.5,-398 730.5,-398 730.5,-398 812.5,-398 812.5,-398 818.5,-398 824.5,-404 824.5,-410 824.5,-410 824.5,-422 824.5,-422 824.5,-428 818.5,-434 812.5,-434"/>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-411.73" font-family="Arial" font-size="12.00">Smartphone App</text>
</a>
</g>
</g>
<!-- User&#45;&gt;SmartphoneApp -->
<g id="edge2" class="edge">
<title>User&#45;&gt;SmartphoneApp</title>
<g id="a_edge2"><a xlink:title="Schema: 実験開始/終了、実験ID選択など">
<path fill="none" stroke="black" d="M396.98,-204.75C484.85,-204.75 754.25,-204.75 754.25,-204.75 754.25,-204.75 754.25,-386.11 754.25,-386.11"/>
<polygon fill="black" stroke="black" points="750.75,-386.11 754.25,-396.11 757.75,-386.11 750.75,-386.11"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="574.88" y="-246.5" font-family="Arial" font-size="10.00">UI操作</text>
</g>
<!-- BIDSExporterService -->
<g id="node14" class="node">
<title>BIDSExporterService</title>
<g id="a_node14"><a xlink:title="指定された実験データをBIDS形式に準拠した形でエクスポートするバッチ処理サービス。">
<path fill="white" stroke="black" d="M1213.62,-231C1213.62,-231 1145.12,-231 1145.12,-231 1139.12,-231 1133.12,-225 1133.12,-219 1133.12,-219 1133.12,-207 1133.12,-207 1133.12,-201 1139.12,-195 1145.12,-195 1145.12,-195 1213.62,-195 1213.62,-195 1219.62,-195 1225.62,-201 1225.62,-207 1225.62,-207 1225.62,-219 1225.62,-219 1225.62,-225 1219.62,-231 1213.62,-231"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-208.72" font-family="Arial" font-size="12.00">BIDS Exporter</text>
</a>
</g>
</g>
<!-- User&#45;&gt;BIDSExporterService -->
<g id="edge7" class="edge">
<title>User&#45;&gt;BIDSExporterService</title>
<g id="a_edge7"><a xlink:title="Schema: { experiment_id }">
<path fill="none" stroke="black" d="M397.03,-201.5C397.03,-201.5 1121.15,-201.5 1121.15,-201.5"/>
<polygon fill="black" stroke="black" points="1121.15,-205 1131.15,-201.5 1121.15,-198 1121.15,-205"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-2.5" font-family="Arial" font-size="10.00">HTTP POST (JSON)</text>
</g>
<!-- Firmware_BLE -->
<g id="node2" class="node">
<title>Firmware_BLE</title>
<g id="a_node2"><a xlink:title="Data acquisition firmware">
<path fill="#e3f2fd" stroke="black" d="M407.62,-302C407.62,-302 331.62,-302 331.62,-302 325.62,-302 319.62,-296 319.62,-290 319.62,-290 319.62,-278 319.62,-278 319.62,-272 325.62,-266 331.62,-266 331.62,-266 407.62,-266 407.62,-266 413.62,-266 419.62,-272 419.62,-278 419.62,-278 419.62,-290 419.62,-290 419.62,-296 413.62,-302 407.62,-302"/>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-279.73" font-family="Arial" font-size="12.00">Firmware (BLE)</text>
</a>
</g>
</g>
<!-- Firmware_BLE&#45;&gt;SmartphoneApp -->
<g id="edge1" class="edge">
<title>Firmware_BLE&#45;&gt;SmartphoneApp</title>
<g id="a_edge1"><a xlink:title="Schema: Zstandard圧縮されたバイナリデータ">
<path fill="none" stroke="black" d="M415.25,-302.41C415.25,-336.73 415.25,-407 415.25,-407 415.25,-407 706.65,-407 706.65,-407"/>
<polygon fill="black" stroke="black" points="706.65,-410.5 716.65,-407 706.65,-403.5 706.65,-410.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="574.88" y="-336.5" font-family="Arial" font-size="10.00">BLE Notify (Compressed Sensor Data)</text>
</g>
<!-- APIServer -->
<g id="node3" class="node">
<title>APIServer</title>
<g id="a_node3"><a xlink:title="Third&#45;party or external APIs">
<path fill="#e3f2fd" stroke="black" d="M399,-434C399,-434 340.25,-434 340.25,-434 334.25,-434 328.25,-428 328.25,-422 328.25,-422 328.25,-410 328.25,-410 328.25,-404 334.25,-398 340.25,-398 340.25,-398 399,-398 399,-398 405,-398 411,-404 411,-410 411,-410 411,-422 411,-422 411,-428 405,-434 399,-434"/>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-411.73" font-family="Arial" font-size="12.00">External API</text>
</a>
</g>
</g>
<!-- APIServer&#45;&gt;SmartphoneApp -->
<g id="edge3" class="edge">
<title>APIServer&#45;&gt;SmartphoneApp</title>
<g id="a_edge3"><a xlink:title="Schema: リアルタイム解析結果、実験リストなど">
<path fill="none" stroke="black" d="M411.5,-416C411.5,-416 706.81,-416 706.81,-416"/>
<polygon fill="black" stroke="black" points="706.81,-419.5 716.81,-416 706.81,-412.5 706.81,-419.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="574.88" y="-418.5" font-family="Arial" font-size="10.00">JSON</text>
</g>
<!-- CollectorService -->
<g id="node5" class="node">
<title>CollectorService</title>
<g id="a_node5"><a xlink:title="全生データの受信を一手に引き受ける、スケーラブルなAPIゲートウェイ。">
<path fill="white" stroke="black" d="M111.5,-798C111.5,-798 28,-798 28,-798 22,-798 16,-792 16,-786 16,-786 16,-774 16,-774 16,-768 22,-762 28,-762 28,-762 111.5,-762 111.5,-762 117.5,-762 123.5,-768 123.5,-774 123.5,-774 123.5,-786 123.5,-786 123.5,-792 117.5,-798 111.5,-798"/>
<text xml:space="preserve" text-anchor="middle" x="69.75" y="-775.73" font-family="Arial" font-size="12.00">Collector Service</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;CollectorService -->
<g id="edge4" class="edge">
<title>SmartphoneApp&#45;&gt;CollectorService</title>
<g id="a_edge4"><a xlink:title="Schema: { user_id, payload_base64 }">
<path fill="none" stroke="black" d="M718.09,-425C621.4,-425 427.25,-425 427.25,-425 427.25,-425 427.25,-771.88 427.25,-771.88 427.25,-771.88 135.17,-771.88 135.17,-771.88"/>
<polygon fill="black" stroke="black" points="135.17,-768.38 125.17,-771.88 135.17,-775.38 135.17,-768.38"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-642.5" font-family="Arial" font-size="10.00">HTTP POST (JSON)</text>
</g>
<!-- ProcessorService -->
<g id="node9" class="node">
<title>ProcessorService</title>
<g id="a_node9"><a xlink:title="生データを解凍・整形し、オブジェクトストレージに永続化するバックエンドサービス。">
<path fill="white" stroke="black" d="M1224.12,-788C1224.12,-788 1134.62,-788 1134.62,-788 1128.62,-788 1122.62,-782 1122.62,-776 1122.62,-776 1122.62,-764 1122.62,-764 1122.62,-758 1128.62,-752 1134.62,-752 1134.62,-752 1224.12,-752 1224.12,-752 1230.12,-752 1236.12,-758 1236.12,-764 1236.12,-764 1236.12,-776 1236.12,-776 1236.12,-782 1230.12,-788 1224.12,-788"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-765.73" font-family="Arial" font-size="12.00">Processor Service</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;ProcessorService -->
<g id="edge18" class="edge">
<title>SmartphoneApp&#45;&gt;ProcessorService</title>
<g id="a_edge18"><a xlink:title="Schema: 時刻同期オフセット情報、メディアファイル">
<path fill="none" stroke="black" d="M824.77,-426.62C885.14,-426.62 975.25,-426.62 975.25,-426.62 975.25,-426.62 975.25,-772.5 975.25,-772.5 975.25,-772.5 1110.73,-772.5 1110.73,-772.5"/>
<polygon fill="black" stroke="black" points="1110.73,-776 1120.73,-772.5 1110.73,-769 1110.73,-776"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-721.5" font-family="Arial" font-size="10.00">HTTP POST</text>
</g>
<!-- RealtimeAnalyzerService -->
<g id="node10" class="node">
<title>RealtimeAnalyzerService</title>
<g id="a_node10"><a xlink:title="生データをリアルタイムに解析し、結果をAPI経由で提供するサービス。">
<path fill="white" stroke="black" d="M1224.5,-694C1224.5,-694 1134.25,-694 1134.25,-694 1128.25,-694 1122.25,-688 1122.25,-682 1122.25,-682 1122.25,-670 1122.25,-670 1122.25,-664 1128.25,-658 1134.25,-658 1134.25,-658 1224.5,-658 1224.5,-658 1230.5,-658 1236.5,-664 1236.5,-670 1236.5,-670 1236.5,-682 1236.5,-682 1236.5,-688 1230.5,-694 1224.5,-694"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-671.73" font-family="Arial" font-size="12.00">Realtime Analyzer</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;RealtimeAnalyzerService -->
<g id="edge6" class="edge">
<title>SmartphoneApp&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge6"><a xlink:title="Schema: 自身のユーザーIDに紐づく解析結果の要求">
<path fill="none" stroke="black" d="M746.25,-434.28C746.25,-493.46 746.25,-676 746.25,-676 746.25,-676 1110.35,-676 1110.35,-676"/>
<polygon fill="black" stroke="black" points="1110.35,-679.5 1120.35,-676 1110.35,-672.5 1110.35,-679.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-646.5" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
</g>
<!-- MinIO -->
<g id="node11" class="node">
<title>MinIO</title>
<g id="a_node11"><a xlink:title="全ての生データ（EEG/IMU, 画像, 音声など）を格納する、スケーラブルなストレージ基盤。">
<path fill="#f8d7da" stroke="black" d="M1218.88,-419.25C1218.88,-419.25 1139.88,-419.25 1139.88,-419.25 1133.88,-419.25 1127.88,-413.25 1127.88,-407.25 1127.88,-407.25 1127.88,-394.75 1127.88,-394.75 1127.88,-388.75 1133.88,-382.75 1139.88,-382.75 1139.88,-382.75 1218.88,-382.75 1218.88,-382.75 1224.88,-382.75 1230.88,-388.75 1230.88,-394.75 1230.88,-394.75 1230.88,-407.25 1230.88,-407.25 1230.88,-413.25 1224.88,-419.25 1218.88,-419.25"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-403.85" font-family="Arial" font-size="12.00">MinIO</text>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-389.6" font-family="Arial" font-size="12.00">(Object Storage)</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;MinIO -->
<g id="edge13" class="edge">
<title>SmartphoneApp&#45;&gt;MinIO</title>
<g id="a_edge13"><a xlink:title="Schema: JPEG, WAVなど">
<path fill="none" stroke="black" d="M824.82,-408.62C824.82,-408.62 1116.14,-408.62 1116.14,-408.62"/>
<polygon fill="black" stroke="black" points="1116.14,-412.13 1126.14,-408.63 1116.14,-405.13 1116.14,-412.13"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-298.5" font-family="Arial" font-size="10.00">画像/音声ファイル</text>
</g>
<!-- SessionManagerService -->
<g id="node13" class="node">
<title>SessionManagerService</title>
<g id="a_node13"><a xlink:title="実験とセッションのメタデータを管理し、ライフサイクルを司るサービス。">
<path fill="white" stroke="black" d="M1222.25,-325C1222.25,-325 1136.5,-325 1136.5,-325 1130.5,-325 1124.5,-319 1124.5,-313 1124.5,-313 1124.5,-301 1124.5,-301 1124.5,-295 1130.5,-289 1136.5,-289 1136.5,-289 1222.25,-289 1222.25,-289 1228.25,-289 1234.25,-295 1234.25,-301 1234.25,-301 1234.25,-313 1234.25,-313 1234.25,-319 1228.25,-325 1222.25,-325"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-302.73" font-family="Arial" font-size="12.00">Session Manager</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;SessionManagerService -->
<g id="edge5" class="edge">
<title>SmartphoneApp&#45;&gt;SessionManagerService</title>
<g id="a_edge5"><a xlink:title="Schema: 実験作成リクエスト、セッション終了通知など">
<path fill="none" stroke="black" d="M789.25,-397.68C789.25,-368.19 789.25,-313.5 789.25,-313.5 789.25,-313.5 1112.79,-313.5 1112.79,-313.5"/>
<polygon fill="black" stroke="black" points="1112.79,-317 1122.79,-313.5 1112.79,-310 1112.79,-317"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-223.5" font-family="Arial" font-size="10.00">HTTP POST/GET (JSON)</text>
</g>
<!-- RawDataExchange -->
<g id="node6" class="node">
<title>RawDataExchange</title>
<g id="a_node6"><a xlink:title="Fanout exchange for data distribution">
<path fill="#fff3cd" stroke="black" d="M423.75,-818.25C423.75,-818.25 315.5,-818.25 315.5,-818.25 309.5,-818.25 303.5,-812.25 303.5,-806.25 303.5,-806.25 303.5,-793.75 303.5,-793.75 303.5,-787.75 309.5,-781.75 315.5,-781.75 315.5,-781.75 423.75,-781.75 423.75,-781.75 429.75,-781.75 435.75,-787.75 435.75,-793.75 435.75,-793.75 435.75,-806.25 435.75,-806.25 435.75,-812.25 429.75,-818.25 423.75,-818.25"/>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-802.85" font-family="Arial" font-size="12.00">RabbitMQ Exchange</text>
<text xml:space="preserve" text-anchor="middle" x="369.62" y="-788.6" font-family="Arial" font-size="12.00">(raw_data_exchange)</text>
</a>
</g>
</g>
<!-- CollectorService&#45;&gt;RawDataExchange -->
<g id="edge11" class="edge">
<title>CollectorService&#45;&gt;RawDataExchange</title>
<g id="a_edge11"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M123.71,-789.88C123.71,-789.88 291.75,-789.88 291.75,-789.88"/>
<polygon fill="black" stroke="black" points="291.75,-793.38 301.75,-789.88 291.75,-786.38 291.75,-793.38"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="213.5" y="-802.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessingQueue -->
<g id="node7" class="node">
<title>ProcessingQueue</title>
<g id="a_node7"><a xlink:title="Queue for data persistence tasks">
<path fill="#fff3cd" stroke="black" d="M817,-887C817,-887 726,-887 726,-887 720,-887 714,-881 714,-875 714,-875 714,-863 714,-863 714,-857 720,-851 726,-851 726,-851 817,-851 817,-851 823,-851 829,-857 829,-863 829,-863 829,-875 829,-875 829,-881 823,-887 817,-887"/>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-864.73" font-family="Arial" font-size="12.00">Processing Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;ProcessingQueue -->
<g id="edge19" class="edge">
<title>RawDataExchange&#45;&gt;ProcessingQueue</title>
<g id="a_edge19"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M435.95,-805.62C550.02,-805.62 771.25,-805.62 771.25,-805.62 771.25,-805.62 771.25,-839.16 771.25,-839.16"/>
<polygon fill="black" stroke="black" points="767.75,-839.16 771.25,-849.16 774.75,-839.16 767.75,-839.16"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="574.88" y="-877.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- AnalysisQueue -->
<g id="node8" class="node">
<title>AnalysisQueue</title>
<g id="a_node8"><a xlink:title="Queue for real&#45;time analysis tasks">
<path fill="#fff3cd" stroke="black" d="M809.88,-793C809.88,-793 733.12,-793 733.12,-793 727.12,-793 721.12,-787 721.12,-781 721.12,-781 721.12,-769 721.12,-769 721.12,-763 727.12,-757 733.12,-757 733.12,-757 809.88,-757 809.88,-757 815.88,-757 821.88,-763 821.88,-769 821.88,-769 821.88,-781 821.88,-781 821.88,-787 815.88,-793 809.88,-793"/>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-770.73" font-family="Arial" font-size="12.00">Analysis Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;AnalysisQueue -->
<g id="edge20" class="edge">
<title>RawDataExchange&#45;&gt;AnalysisQueue</title>
<g id="a_edge20"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M435.99,-787.38C435.99,-787.38 709.15,-787.38 709.15,-787.38"/>
<polygon fill="black" stroke="black" points="709.15,-790.88 719.15,-787.38 709.15,-783.88 709.15,-790.88"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="574.88" y="-802.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessingQueue&#45;&gt;ProcessorService -->
<g id="edge17" class="edge">
<title>ProcessingQueue&#45;&gt;ProcessorService</title>
<g id="a_edge17"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M829.49,-869C942.06,-869 1179.25,-869 1179.25,-869 1179.25,-869 1179.25,-799.67 1179.25,-799.67"/>
<polygon fill="black" stroke="black" points="1182.75,-799.67 1179.25,-789.67 1175.75,-799.67 1182.75,-799.67"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-871.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- AnalysisQueue&#45;&gt;RealtimeAnalyzerService -->
<g id="edge21" class="edge">
<title>AnalysisQueue&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge21"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M796.25,-756.79C796.25,-730.49 796.25,-685 796.25,-685 796.25,-685 1110.5,-685 1110.5,-685"/>
<polygon fill="black" stroke="black" points="1110.5,-688.5 1120.5,-685 1110.5,-681.5 1110.5,-688.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-796.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessorService&#45;&gt;MinIO -->
<g id="edge12" class="edge">
<title>ProcessorService&#45;&gt;MinIO</title>
<g id="a_edge12"><a xlink:title="Schema: EEG/IMUデータ">
<path fill="none" stroke="black" d="M1236.18,-770C1252.15,-770 1265.25,-770 1265.25,-770 1265.25,-770 1265.25,-407.08 1265.25,-407.08 1265.25,-407.08 1242.82,-407.08 1242.82,-407.08"/>
<polygon fill="black" stroke="black" points="1242.82,-403.58 1232.82,-407.08 1242.82,-410.58 1242.82,-403.58"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-479.5" font-family="Arial" font-size="10.00">Zstandard圧縮されたバイナリ</text>
</g>
<!-- RealtimeAnalyzerService&#45;&gt;SmartphoneApp -->
<g id="edge22" class="edge">
<title>RealtimeAnalyzerService&#45;&gt;SmartphoneApp</title>
<g id="a_edge22"><a xlink:title="Schema: { psd_image_b64, coherence_image_b64, timestamp }">
<path fill="none" stroke="black" d="M1121.77,-667C1009.27,-667 771.25,-667 771.25,-667 771.25,-667 771.25,-445.97 771.25,-445.97"/>
<polygon fill="black" stroke="black" points="774.75,-445.97 771.25,-435.97 767.75,-445.97 774.75,-445.97"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-571.5" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
</g>
<!-- MinIO&#45;&gt;BIDSExporterService -->
<g id="edge9" class="edge">
<title>MinIO&#45;&gt;BIDSExporterService</title>
<g id="a_edge9"><a xlink:title="Schema: セッションに対応する生データオブジェクト群">
<path fill="none" stroke="black" d="M1231.11,-394.92C1281.4,-394.92 1350.25,-394.92 1350.25,-394.92 1350.25,-394.92 1350.25,-219 1350.25,-219 1350.25,-219 1237.58,-219 1237.58,-219"/>
<polygon fill="black" stroke="black" points="1237.58,-215.5 1227.58,-219 1237.58,-222.5 1237.58,-215.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-315.5" font-family="Arial" font-size="10.00">Object GET</text>
</g>
<!-- PostgreSQL -->
<g id="node12" class="node">
<title>PostgreSQL</title>
<g id="a_node12"><a xlink:title="全てのメタデータを管理する、信頼性の高いリレーショナルデータベース。">
<path fill="#f8d7da" stroke="black" d="M1214,-600.25C1214,-600.25 1144.75,-600.25 1144.75,-600.25 1138.75,-600.25 1132.75,-594.25 1132.75,-588.25 1132.75,-588.25 1132.75,-575.75 1132.75,-575.75 1132.75,-569.75 1138.75,-563.75 1144.75,-563.75 1144.75,-563.75 1214,-563.75 1214,-563.75 1220,-563.75 1226,-569.75 1226,-575.75 1226,-575.75 1226,-588.25 1226,-588.25 1226,-594.25 1220,-600.25 1214,-600.25"/>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-584.85" font-family="Arial" font-size="12.00">PostgreSQL</text>
<text xml:space="preserve" text-anchor="middle" x="1179.38" y="-570.6" font-family="Arial" font-size="12.00">(Metadata DB)</text>
</a>
</g>
</g>
<!-- PostgreSQL&#45;&gt;SessionManagerService -->
<g id="edge16" class="edge">
<title>PostgreSQL&#45;&gt;SessionManagerService</title>
<g id="a_edge16"><a xlink:title="Schema: 各種メタデータの読み出し">
<path fill="none" stroke="black" d="M1226.16,-578.35C1267.83,-578.35 1322.25,-578.35 1322.25,-578.35 1322.25,-578.35 1322.25,-307 1322.25,-307 1322.25,-307 1246.13,-307 1246.13,-307"/>
<polygon fill="black" stroke="black" points="1246.13,-303.5 1236.13,-307 1246.13,-310.5 1246.13,-303.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-423.5" font-family="Arial" font-size="10.00">SQL SELECT</text>
</g>
<!-- PostgreSQL&#45;&gt;BIDSExporterService -->
<g id="edge8" class="edge">
<title>PostgreSQL&#45;&gt;BIDSExporterService</title>
<g id="a_edge8"><a xlink:title="Schema: 指定された`experiment_id`に属する全てのセッションメタデータ">
<path fill="none" stroke="black" d="M1226.49,-585.65C1285.58,-585.65 1379.25,-585.65 1379.25,-585.65 1379.25,-585.65 1379.25,-207 1379.25,-207 1379.25,-207 1237.5,-207 1237.5,-207"/>
<polygon fill="black" stroke="black" points="1237.5,-203.5 1227.5,-207 1237.5,-210.5 1237.5,-203.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-369.5" font-family="Arial" font-size="10.00">SQL SELECT</text>
</g>
<!-- SessionManagerService&#45;&gt;PostgreSQL -->
<g id="edge15" class="edge">
<title>SessionManagerService&#45;&gt;PostgreSQL</title>
<g id="a_edge15"><a xlink:title="Schema: 実験、セッション情報">
<path fill="none" stroke="black" d="M1234.64,-316C1263.66,-316 1293.25,-316 1293.25,-316 1293.25,-316 1293.25,-571.05 1293.25,-571.05 1293.25,-571.05 1237.86,-571.05 1237.86,-571.05"/>
<polygon fill="black" stroke="black" points="1237.86,-567.55 1227.86,-571.05 1237.86,-574.55 1237.86,-567.55"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="975.62" y="-496.5" font-family="Arial" font-size="10.00">SQL INSERT/UPDATE</text>
</g>
<!-- DataLinkageWorker -->
<g id="node15" class="node">
<title>DataLinkageWorker</title>
<g id="a_node15"><a xlink:title="Asynchronous worker for data linkage">
<path fill="#fff3cd" stroke="black" d="M1511.25,-325.25C1511.25,-325.25 1419.5,-325.25 1419.5,-325.25 1413.5,-325.25 1407.5,-319.25 1407.5,-313.25 1407.5,-313.25 1407.5,-300.75 1407.5,-300.75 1407.5,-294.75 1413.5,-288.75 1419.5,-288.75 1419.5,-288.75 1511.25,-288.75 1511.25,-288.75 1517.25,-288.75 1523.25,-294.75 1523.25,-300.75 1523.25,-300.75 1523.25,-313.25 1523.25,-313.25 1523.25,-319.25 1517.25,-325.25 1511.25,-325.25"/>
<text xml:space="preserve" text-anchor="middle" x="1465.38" y="-309.85" font-family="Arial" font-size="12.00">Async Task Queue</text>
<text xml:space="preserve" text-anchor="middle" x="1465.38" y="-295.6" font-family="Arial" font-size="12.00">(DataLinker)</text>
</a>
</g>
</g>
<!-- SessionManagerService&#45;&gt;DataLinkageWorker -->
<g id="edge23" class="edge">
<title>SessionManagerService&#45;&gt;DataLinkageWorker</title>
<g id="a_edge23"><a xlink:title="Schema: データ紐付け処理のタスク">
<path fill="none" stroke="black" d="M1234.52,-298C1234.52,-298 1395.94,-298 1395.94,-298"/>
<polygon fill="black" stroke="black" points="1395.94,-301.5 1405.94,-298 1395.94,-294.5 1395.94,-301.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1322" y="-309.5" font-family="Arial" font-size="10.00">Job</text>
</g>
<!-- BIDSExporterService&#45;&gt;User -->
<g id="edge10" class="edge">
<title>BIDSExporterService&#45;&gt;User</title>
<g id="a_edge10"><a xlink:title="Schema: BIDS形式のディレクトリ構造を持つデータセット">
<path fill="none" stroke="black" d="M1132.64,-198.25C1132.64,-198.25 408.42,-198.25 408.42,-198.25"/>
<polygon fill="black" stroke="black" points="408.42,-194.75 398.42,-198.25 408.42,-201.75 408.42,-194.75"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="771.5" y="-130.5" font-family="Arial" font-size="10.00">ZIPファイル</text>
</g>
<!-- DataLinkageWorker&#45;&gt;PostgreSQL -->
<g id="edge14" class="edge">
<title>DataLinkageWorker&#45;&gt;PostgreSQL</title>
<g id="a_edge14"><a xlink:title="Schema: セッションとオブジェクトIDの関連付け">
<path fill="none" stroke="black" d="M1465.25,-325.32C1465.25,-388.43 1465.25,-592.95 1465.25,-592.95 1465.25,-592.95 1237.77,-592.95 1237.77,-592.95"/>
<polygon fill="black" stroke="black" points="1237.77,-589.45 1227.77,-592.95 1237.77,-596.45 1237.77,-589.45"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1322" y="-484.5" font-family="Arial" font-size="10.00">SQL UPDATE</text>
</g>
</g>
</svg>
