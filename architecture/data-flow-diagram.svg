<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.2 (20250808.2320)
 -->
<!-- Pages: 1 -->
<svg width="2120pt" height="790pt"
 viewBox="0.00 0.00 2120.00 790.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 785.5)">
<polygon fill="white" stroke="none" points="-4,4 -4,-785.5 2116.25,-785.5 2116.25,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="1056.12" y="-758.5" font-family="Times New Roman,serif" font-size="20.00">Interactive Data Flow Diagram</text>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M452,-420C452,-420 624,-420 624,-420 630,-420 636,-426 636,-432 636,-432 636,-731 636,-731 636,-737 630,-743 624,-743 624,-743 452,-743 452,-743 446,-743 440,-737 440,-731 440,-731 440,-432 440,-432 440,-426 446,-420 452,-420"/>
<text xml:space="preserve" text-anchor="middle" x="538" y="-723.8" font-family="Times New Roman,serif" font-size="16.00">External Actors</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M884,-602C884,-602 1056,-602 1056,-602 1062,-602 1068,-608 1068,-614 1068,-614 1068,-719 1068,-719 1068,-725 1062,-731 1056,-731 1056,-731 884,-731 884,-731 878,-731 872,-725 872,-719 872,-719 872,-614 872,-614 872,-608 878,-602 884,-602"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-711.8" font-family="Times New Roman,serif" font-size="16.00">External Services</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M884,-408C884,-408 1056,-408 1056,-408 1062,-408 1068,-414 1068,-420 1068,-420 1068,-525 1068,-525 1068,-531 1062,-537 1056,-537 1056,-537 884,-537 884,-537 878,-537 872,-531 872,-525 872,-525 872,-420 872,-420 872,-414 878,-408 884,-408"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-517.8" font-family="Times New Roman,serif" font-size="16.00">Mobile Client</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_3</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M20,-8C20,-8 1056,-8 1056,-8 1062,-8 1068,-14 1068,-20 1068,-20 1068,-319 1068,-319 1068,-325 1062,-331 1056,-331 1056,-331 20,-331 20,-331 14,-331 8,-325 8,-319 8,-319 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text xml:space="preserve" text-anchor="middle" x="538" y="-311.8" font-family="Times New Roman,serif" font-size="16.00">API &amp; Data Ingestion</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_4</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1316,-8C1316,-8 1488,-8 1488,-8 1494,-8 1500,-14 1500,-20 1500,-20 1500,-319 1500,-319 1500,-325 1494,-331 1488,-331 1488,-331 1316,-331 1316,-331 1310,-331 1304,-325 1304,-319 1304,-319 1304,-20 1304,-20 1304,-14 1310,-8 1316,-8"/>
<text xml:space="preserve" text-anchor="middle" x="1402" y="-311.8" font-family="Times New Roman,serif" font-size="16.00">Backend Processing</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_5</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1748,-65C1748,-65 1920,-65 1920,-65 1926,-65 1932,-71 1932,-77 1932,-77 1932,-376 1932,-376 1932,-382 1926,-388 1920,-388 1920,-388 1748,-388 1748,-388 1742,-388 1736,-382 1736,-376 1736,-376 1736,-77 1736,-77 1736,-71 1742,-65 1748,-65"/>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-368.8" font-family="Times New Roman,serif" font-size="16.00">Storage Layer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_6</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M1316,-396C1316,-396 1920,-396 1920,-396 1926,-396 1932,-402 1932,-408 1932,-408 1932,-707 1932,-707 1932,-713 1926,-719 1920,-719 1920,-719 1316,-719 1316,-719 1310,-719 1304,-713 1304,-707 1304,-707 1304,-408 1304,-408 1304,-402 1310,-396 1316,-396"/>
<text xml:space="preserve" text-anchor="middle" x="1618" y="-699.8" font-family="Times New Roman,serif" font-size="16.00">Management &amp; Export</text>
</g>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<g id="a_node1"><a xlink:title="System User">
<path fill="#e3f2fd" stroke="black" d="M616,-514.2C616,-514.2 460,-514.2 460,-514.2 454,-514.2 448,-508.2 448,-502.2 448,-502.2 448,-439.8 448,-439.8 448,-433.8 454,-427.8 460,-427.8 460,-427.8 616,-427.8 616,-427.8 622,-427.8 628,-433.8 628,-439.8 628,-439.8 628,-502.2 628,-502.2 628,-508.2 622,-514.2 616,-514.2"/>
<text xml:space="preserve" text-anchor="middle" x="538" y="-466.73" font-family="Arial" font-size="12.00">User</text>
</a>
</g>
</g>
<!-- SmartphoneApp -->
<g id="node4" class="node">
<title>SmartphoneApp</title>
<g id="a_node4"><a xlink:title="ユーザーインターフェースを提供し、ファームウェアとサーバー群を繋ぐ中継ハブ。">
<path fill="#e8f5e9" stroke="black" d="M1048,-502.2C1048,-502.2 892,-502.2 892,-502.2 886,-502.2 880,-496.2 880,-490.2 880,-490.2 880,-427.8 880,-427.8 880,-421.8 886,-415.8 892,-415.8 892,-415.8 1048,-415.8 1048,-415.8 1054,-415.8 1060,-421.8 1060,-427.8 1060,-427.8 1060,-490.2 1060,-490.2 1060,-496.2 1054,-502.2 1048,-502.2"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-454.73" font-family="Arial" font-size="12.00">Smartphone App</text>
</a>
</g>
</g>
<!-- User&#45;&gt;SmartphoneApp -->
<g id="edge2" class="edge">
<title>User&#45;&gt;SmartphoneApp</title>
<g id="a_edge2"><a xlink:title="Schema: 実験開始/終了、実験ID選択など">
<path fill="none" stroke="black" d="M628.3,-452.6C628.3,-452.6 868.31,-452.6 868.31,-452.6"/>
<polygon fill="black" stroke="black" points="868.31,-456.1 878.31,-452.6 868.31,-449.1 868.31,-456.1"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="857.43" y="-443.1" font-family="Arial" font-size="10.00">UI操作</text>
<text xml:space="preserve" text-anchor="middle" x="857.43" y="-431.1" font-family="Arial" font-size="10.00">実験開始/終了、実験ID選択など</text>
</g>
<!-- Firmware_BLE -->
<g id="node2" class="node">
<title>Firmware_BLE</title>
<g id="a_node2"><a xlink:title="Data acquisition firmware">
<path fill="#e3f2fd" stroke="black" d="M616,-708.2C616,-708.2 460,-708.2 460,-708.2 454,-708.2 448,-702.2 448,-696.2 448,-696.2 448,-633.8 448,-633.8 448,-627.8 454,-621.8 460,-621.8 460,-621.8 616,-621.8 616,-621.8 622,-621.8 628,-627.8 628,-633.8 628,-633.8 628,-696.2 628,-696.2 628,-702.2 622,-708.2 616,-708.2"/>
<text xml:space="preserve" text-anchor="middle" x="538" y="-660.73" font-family="Arial" font-size="12.00">Firmware (BLE)</text>
</a>
</g>
</g>
<!-- Firmware_BLE&#45;&gt;SmartphoneApp -->
<g id="edge1" class="edge">
<title>Firmware_BLE&#45;&gt;SmartphoneApp</title>
<g id="a_edge1"><a xlink:title="Schema: Zstandard圧縮されたバイナリデータ">
<path fill="none" stroke="black" d="M628.35,-659C687.54,-659 754,-659 754,-659 754,-659 754,-477.4 754,-477.4 754,-477.4 868.13,-477.4 868.13,-477.4"/>
<polygon fill="black" stroke="black" points="868.13,-480.9 878.13,-477.4 868.13,-473.9 868.13,-480.9"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="637.75" y="-564.46" font-family="Arial" font-size="10.00">BLE Notify (Compressed Sensor Data)</text>
<text xml:space="preserve" text-anchor="middle" x="637.75" y="-552.46" font-family="Arial" font-size="10.00">Zstandard圧縮されたバイナリデータ</text>
</g>
<!-- APIServer -->
<g id="node3" class="node">
<title>APIServer</title>
<g id="a_node3"><a xlink:title="Third&#45;party or external APIs (e.g., ERP Detection System)">
<path fill="#e3f2fd" stroke="black" d="M1048,-696.2C1048,-696.2 892,-696.2 892,-696.2 886,-696.2 880,-690.2 880,-684.2 880,-684.2 880,-621.8 880,-621.8 880,-615.8 886,-609.8 892,-609.8 892,-609.8 1048,-609.8 1048,-609.8 1054,-609.8 1060,-615.8 1060,-621.8 1060,-621.8 1060,-684.2 1060,-684.2 1060,-690.2 1054,-696.2 1048,-696.2"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-648.73" font-family="Arial" font-size="12.00">External API</text>
</a>
</g>
</g>
<!-- APIServer&#45;&gt;SmartphoneApp -->
<g id="edge3" class="edge">
<title>APIServer&#45;&gt;SmartphoneApp</title>
<g id="a_edge3"><a xlink:title="Schema: リアルタイム解析結果、実験リストなど">
<path fill="none" stroke="black" d="M970,-609.46C970,-609.46 970,-513.91 970,-513.91"/>
<polygon fill="black" stroke="black" points="973.5,-513.91 970,-503.91 966.5,-513.91 973.5,-513.91"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1111.75" y="-552.18" font-family="Arial" font-size="10.00">JSON</text>
<text xml:space="preserve" text-anchor="middle" x="1111.75" y="-540.18" font-family="Arial" font-size="10.00">リアルタイム解析結果、実験リストなど</text>
</g>
<!-- BIDSExporterService -->
<g id="node14" class="node">
<title>BIDSExporterService</title>
<g id="a_node14"><a xlink:title="指定された実験データをBIDS形式に準拠した形でエクスポートするバッチ処理サービス。">
<path fill="white" stroke="black" d="M1480,-490.2C1480,-490.2 1324,-490.2 1324,-490.2 1318,-490.2 1312,-484.2 1312,-478.2 1312,-478.2 1312,-415.8 1312,-415.8 1312,-409.8 1318,-403.8 1324,-403.8 1324,-403.8 1480,-403.8 1480,-403.8 1486,-403.8 1492,-409.8 1492,-415.8 1492,-415.8 1492,-478.2 1492,-478.2 1492,-484.2 1486,-490.2 1480,-490.2"/>
<text xml:space="preserve" text-anchor="middle" x="1402" y="-442.73" font-family="Arial" font-size="12.00">BIDS Exporter</text>
</a>
</g>
</g>
<!-- APIServer&#45;&gt;BIDSExporterService -->
<g id="edge7" class="edge">
<title>APIServer&#45;&gt;BIDSExporterService</title>
<g id="a_edge7"><a xlink:title="Schema: { experiment_id }">
<path fill="none" stroke="black" d="M1060.39,-634.6C1146.15,-634.6 1262,-634.6 1262,-634.6 1262,-634.6 1262,-460.44 1262,-460.44 1262,-460.44 1300.24,-460.44 1300.24,-460.44"/>
<polygon fill="black" stroke="black" points="1300.24,-463.94 1310.24,-460.44 1300.24,-456.94 1300.24,-463.94"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1215.88" y="-619.7" font-family="Arial" font-size="10.00">HTTP POST (JSON)</text>
<text xml:space="preserve" text-anchor="middle" x="1215.88" y="-607.7" font-family="Arial" font-size="10.00">{ experiment_id }</text>
</g>
<!-- CollectorService -->
<g id="node5" class="node">
<title>CollectorService</title>
<g id="a_node5"><a xlink:title="全生データの受信を一手に引き受ける、スケーラブルなAPIゲートウェイ。">
<path fill="white" stroke="black" d="M184,-199.2C184,-199.2 28,-199.2 28,-199.2 22,-199.2 16,-193.2 16,-187.2 16,-187.2 16,-124.8 16,-124.8 16,-118.8 22,-112.8 28,-112.8 28,-112.8 184,-112.8 184,-112.8 190,-112.8 196,-118.8 196,-124.8 196,-124.8 196,-187.2 196,-187.2 196,-193.2 190,-199.2 184,-199.2"/>
<text xml:space="preserve" text-anchor="middle" x="106" y="-151.72" font-family="Arial" font-size="12.00">Collector Service</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;CollectorService -->
<g id="edge4" class="edge">
<title>SmartphoneApp&#45;&gt;CollectorService</title>
<g id="a_edge4"><a xlink:title="Schema: 時刻同期オフセット情報、メディアファイル">
<path fill="none" stroke="black" d="M879.58,-421.8C658.02,-421.8 106,-421.8 106,-421.8 106,-421.8 106,-211.11 106,-211.11"/>
<polygon fill="black" stroke="black" points="109.5,-211.11 106,-201.11 102.5,-211.11 109.5,-211.11"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="229.94" y="-412.3" font-family="Arial" font-size="10.00">HTTP POST</text>
<text xml:space="preserve" text-anchor="middle" x="229.94" y="-400.3" font-family="Arial" font-size="10.00">時刻同期オフセット情報、メディアファイル</text>
</g>
<!-- RealtimeAnalyzerService -->
<g id="node10" class="node">
<title>RealtimeAnalyzerService</title>
<g id="a_node10"><a xlink:title="生データをリアルタイムに解析し、結果をAPI経由で提供するサービス。">
<path fill="white" stroke="black" d="M1480,-296.2C1480,-296.2 1324,-296.2 1324,-296.2 1318,-296.2 1312,-290.2 1312,-284.2 1312,-284.2 1312,-221.8 1312,-221.8 1312,-215.8 1318,-209.8 1324,-209.8 1324,-209.8 1480,-209.8 1480,-209.8 1486,-209.8 1492,-215.8 1492,-221.8 1492,-221.8 1492,-284.2 1492,-284.2 1492,-290.2 1486,-296.2 1480,-296.2"/>
<text xml:space="preserve" text-anchor="middle" x="1402" y="-248.72" font-family="Arial" font-size="12.00">Realtime Analyzer</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;RealtimeAnalyzerService -->
<g id="edge6" class="edge">
<title>SmartphoneApp&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge6"><a xlink:title="Schema: 自身のユーザーIDに紐づく解析結果の要求">
<path fill="none" stroke="black" d="M1060.25,-445.56C1087.34,-445.56 1110,-445.56 1110,-445.56 1110,-445.56 1110,-274.6 1110,-274.6 1110,-274.6 1300.1,-274.6 1300.1,-274.6"/>
<polygon fill="black" stroke="black" points="1300.1,-278.1 1310.1,-274.6 1300.1,-271.1 1300.1,-278.1"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="963" y="-304.41" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
<text xml:space="preserve" text-anchor="middle" x="963" y="-292.41" font-family="Arial" font-size="10.00">自身のユーザーIDに紐づく解析結果の要求</text>
</g>
<!-- SessionManagerService -->
<g id="node13" class="node">
<title>SessionManagerService</title>
<g id="a_node13"><a xlink:title="実験とセッションのメタデータを管理し、ライフサイクルを司るサービス。">
<path fill="white" stroke="black" d="M1480,-684.2C1480,-684.2 1324,-684.2 1324,-684.2 1318,-684.2 1312,-678.2 1312,-672.2 1312,-672.2 1312,-609.8 1312,-609.8 1312,-603.8 1318,-597.8 1324,-597.8 1324,-597.8 1480,-597.8 1480,-597.8 1486,-597.8 1492,-603.8 1492,-609.8 1492,-609.8 1492,-672.2 1492,-672.2 1492,-678.2 1486,-684.2 1480,-684.2"/>
<text xml:space="preserve" text-anchor="middle" x="1402" y="-636.73" font-family="Arial" font-size="12.00">Session Manager</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;SessionManagerService -->
<g id="edge5" class="edge">
<title>SmartphoneApp&#45;&gt;SessionManagerService</title>
<g id="a_edge5"><a xlink:title="Schema: 実験作成リクエスト、セッション終了通知など">
<path fill="none" stroke="black" d="M1060.3,-496.2C1186.94,-496.2 1402,-496.2 1402,-496.2 1402,-496.2 1402,-586.04 1402,-586.04"/>
<polygon fill="black" stroke="black" points="1398.5,-586.04 1402,-596.04 1405.5,-586.04 1398.5,-586.04"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1441.44" y="-509.95" font-family="Arial" font-size="10.00">HTTP POST/GET (JSON)</text>
<text xml:space="preserve" text-anchor="middle" x="1441.44" y="-497.95" font-family="Arial" font-size="10.00">実験作成リクエスト、セッション終了通知など</text>
</g>
<!-- RawDataExchange -->
<g id="node6" class="node">
<title>RawDataExchange</title>
<g id="a_node6"><a xlink:title="Fanout exchange for data distribution">
<path fill="#fff3cd" stroke="black" d="M616,-102.2C616,-102.2 460,-102.2 460,-102.2 454,-102.2 448,-96.2 448,-90.2 448,-90.2 448,-27.8 448,-27.8 448,-21.8 454,-15.8 460,-15.8 460,-15.8 616,-15.8 616,-15.8 622,-15.8 628,-21.8 628,-27.8 628,-27.8 628,-90.2 628,-90.2 628,-96.2 622,-102.2 616,-102.2"/>
<text xml:space="preserve" text-anchor="middle" x="538" y="-61.85" font-family="Arial" font-size="12.00">RabbitMQ Exchange</text>
<text xml:space="preserve" text-anchor="middle" x="538" y="-47.6" font-family="Arial" font-size="12.00">(raw_data_exchange)</text>
</a>
</g>
</g>
<!-- CollectorService&#45;&gt;RawDataExchange -->
<g id="edge11" class="edge">
<title>CollectorService&#45;&gt;RawDataExchange</title>
<g id="a_edge11"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M196.47,-143.73C315.01,-143.73 508,-143.73 508,-143.73 508,-143.73 508,-113.87 508,-113.87"/>
<polygon fill="black" stroke="black" points="511.5,-113.87 508,-103.87 504.5,-113.87 511.5,-113.87"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="482.66" y="-134.23" font-family="Arial" font-size="10.00">AMQP Message</text>
<text xml:space="preserve" text-anchor="middle" x="482.66" y="-122.23" font-family="Arial" font-size="10.00">Body: バイナリデータ, Headers: { user_id }</text>
</g>
<!-- ProcessingQueue -->
<g id="node7" class="node">
<title>ProcessingQueue</title>
<g id="a_node7"><a xlink:title="Queue for data persistence tasks">
<path fill="#fff3cd" stroke="black" d="M1048,-102.2C1048,-102.2 892,-102.2 892,-102.2 886,-102.2 880,-96.2 880,-90.2 880,-90.2 880,-27.8 880,-27.8 880,-21.8 886,-15.8 892,-15.8 892,-15.8 1048,-15.8 1048,-15.8 1054,-15.8 1060,-21.8 1060,-27.8 1060,-27.8 1060,-90.2 1060,-90.2 1060,-96.2 1054,-102.2 1048,-102.2"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-54.73" font-family="Arial" font-size="12.00">Processing Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;ProcessingQueue -->
<g id="edge18" class="edge">
<title>RawDataExchange&#45;&gt;ProcessingQueue</title>
<g id="a_edge18"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M628.3,-59C628.3,-59 868.31,-59 868.31,-59"/>
<polygon fill="black" stroke="black" points="868.31,-62.5 878.31,-59 868.31,-55.5 868.31,-62.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="712.3" y="-49.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- AnalysisQueue -->
<g id="node8" class="node">
<title>AnalysisQueue</title>
<g id="a_node8"><a xlink:title="Queue for real&#45;time analysis tasks">
<path fill="#fff3cd" stroke="black" d="M1048,-296.2C1048,-296.2 892,-296.2 892,-296.2 886,-296.2 880,-290.2 880,-284.2 880,-284.2 880,-221.8 880,-221.8 880,-215.8 886,-209.8 892,-209.8 892,-209.8 1048,-209.8 1048,-209.8 1054,-209.8 1060,-215.8 1060,-221.8 1060,-221.8 1060,-284.2 1060,-284.2 1060,-290.2 1054,-296.2 1048,-296.2"/>
<text xml:space="preserve" text-anchor="middle" x="970" y="-248.72" font-family="Arial" font-size="12.00">Analysis Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;AnalysisQueue -->
<g id="edge19" class="edge">
<title>RawDataExchange&#45;&gt;AnalysisQueue</title>
<g id="a_edge19"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M568,-102.54C568,-159.74 568,-253 568,-253 568,-253 868.02,-253 868.02,-253"/>
<polygon fill="black" stroke="black" points="868.02,-256.5 878.02,-253 868.02,-249.5 868.02,-256.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="606.78" y="-243.5" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessorService -->
<g id="node9" class="node">
<title>ProcessorService</title>
<g id="a_node9"><a xlink:title="生データを解凍・整形し、オブジェクトストレージとデータベースに永続化するバックエンドサービス。">
<path fill="white" stroke="black" d="M1480,-102.2C1480,-102.2 1324,-102.2 1324,-102.2 1318,-102.2 1312,-96.2 1312,-90.2 1312,-90.2 1312,-27.8 1312,-27.8 1312,-21.8 1318,-15.8 1324,-15.8 1324,-15.8 1480,-15.8 1480,-15.8 1486,-15.8 1492,-21.8 1492,-27.8 1492,-27.8 1492,-90.2 1492,-90.2 1492,-96.2 1486,-102.2 1480,-102.2"/>
<text xml:space="preserve" text-anchor="middle" x="1402" y="-54.73" font-family="Arial" font-size="12.00">Processor Service</text>
</a>
</g>
</g>
<!-- ProcessingQueue&#45;&gt;ProcessorService -->
<g id="edge17" class="edge">
<title>ProcessingQueue&#45;&gt;ProcessorService</title>
<g id="a_edge17"><a xlink:title="Schema: Body: 時刻同期オフセット情報, Headers: { user_id }">
<path fill="none" stroke="black" d="M1060.3,-59C1060.3,-59 1300.31,-59 1300.31,-59"/>
<polygon fill="black" stroke="black" points="1300.31,-62.5 1310.31,-59 1300.31,-55.5 1300.31,-62.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1327.3" y="-49.5" font-family="Arial" font-size="10.00">AMQP Message</text>
<text xml:space="preserve" text-anchor="middle" x="1327.3" y="-37.5" font-family="Arial" font-size="10.00">Body: 時刻同期オフセット情報, Headers: { user_id }</text>
</g>
<!-- AnalysisQueue&#45;&gt;RealtimeAnalyzerService -->
<g id="edge20" class="edge">
<title>AnalysisQueue&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge20"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M1060.3,-231.4C1060.3,-231.4 1300.31,-231.4 1300.31,-231.4"/>
<polygon fill="black" stroke="black" points="1300.31,-234.9 1310.31,-231.4 1300.31,-227.9 1300.31,-234.9"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1295.8" y="-221.9" font-family="Arial" font-size="10.00">AMQP Message</text>
<text xml:space="preserve" text-anchor="middle" x="1295.8" y="-209.9" font-family="Arial" font-size="10.00">Body: バイナリデータ, Headers: { user_id }</text>
</g>
<!-- MinIO -->
<g id="node11" class="node">
<title>MinIO</title>
<g id="a_node11"><a xlink:title="全ての生データ（EEG/IMU, 画像, 音声など）を格納する、スケーラブルなストレージ基盤。">
<path fill="#f8d7da" stroke="black" d="M1912,-159.2C1912,-159.2 1756,-159.2 1756,-159.2 1750,-159.2 1744,-153.2 1744,-147.2 1744,-147.2 1744,-84.8 1744,-84.8 1744,-78.8 1750,-72.8 1756,-72.8 1756,-72.8 1912,-72.8 1912,-72.8 1918,-72.8 1924,-78.8 1924,-84.8 1924,-84.8 1924,-147.2 1924,-147.2 1924,-153.2 1918,-159.2 1912,-159.2"/>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-118.85" font-family="Arial" font-size="12.00">MinIO</text>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-104.6" font-family="Arial" font-size="12.00">(Object Storage)</text>
</a>
</g>
</g>
<!-- ProcessorService&#45;&gt;MinIO -->
<g id="edge12" class="edge">
<title>ProcessorService&#45;&gt;MinIO</title>
<g id="a_edge12"><a xlink:title="Schema: EEG/IMUデータ, JPEG, WAVなど">
<path fill="none" stroke="black" d="M1492.3,-82.6C1492.3,-82.6 1732.31,-82.6 1732.31,-82.6"/>
<polygon fill="black" stroke="black" points="1732.31,-86.1 1742.31,-82.6 1732.31,-79.1 1732.31,-86.1"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1704.93" y="-73.1" font-family="Arial" font-size="10.00">Zstandard圧縮されたバイナリ</text>
<text xml:space="preserve" text-anchor="middle" x="1704.93" y="-61.1" font-family="Arial" font-size="10.00">EEG/IMUデータ, JPEG, WAVなど</text>
</g>
<!-- PostgreSQL -->
<g id="node12" class="node">
<title>PostgreSQL</title>
<g id="a_node12"><a xlink:title="全てのメタデータを管理する、信頼性の高いリレーショナルデータベース。">
<path fill="#f8d7da" stroke="black" d="M1912,-353.2C1912,-353.2 1756,-353.2 1756,-353.2 1750,-353.2 1744,-347.2 1744,-341.2 1744,-341.2 1744,-278.8 1744,-278.8 1744,-272.8 1750,-266.8 1756,-266.8 1756,-266.8 1912,-266.8 1912,-266.8 1918,-266.8 1924,-272.8 1924,-278.8 1924,-278.8 1924,-341.2 1924,-341.2 1924,-347.2 1918,-353.2 1912,-353.2"/>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-312.85" font-family="Arial" font-size="12.00">PostgreSQL</text>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-298.6" font-family="Arial" font-size="12.00">(Metadata DB)</text>
</a>
</g>
</g>
<!-- ProcessorService&#45;&gt;PostgreSQL -->
<g id="edge13" class="edge">
<title>ProcessorService&#45;&gt;PostgreSQL</title>
<g id="a_edge13"><a xlink:title="Schema: 生データオブジェクトのメタ情報 (`raw_data_objects`テーブル)">
<path fill="none" stroke="black" d="M1492.39,-92.4C1578.15,-92.4 1694,-92.4 1694,-92.4 1694,-92.4 1694,-281.5 1694,-281.5 1694,-281.5 1732.24,-281.5 1732.24,-281.5"/>
<polygon fill="black" stroke="black" points="1732.24,-285 1742.24,-281.5 1732.24,-278 1732.24,-285"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1498.62" y="-119.77" font-family="Arial" font-size="10.00">SQL INSERT</text>
<text xml:space="preserve" text-anchor="middle" x="1498.62" y="-107.77" font-family="Arial" font-size="10.00">生データオブジェクトのメタ情報 (`raw_data_objects`テーブル)</text>
</g>
<!-- RealtimeAnalyzerService&#45;&gt;SmartphoneApp -->
<g id="edge21" class="edge">
<title>RealtimeAnalyzerService&#45;&gt;SmartphoneApp</title>
<g id="a_edge21"><a xlink:title="Schema: { psd_image_b64, coherence_image_b64, timestamp }">
<path fill="none" stroke="black" d="M1311.57,-253C1243.19,-253 1161,-253 1161,-253 1161,-253 1161,-430.68 1161,-430.68 1161,-430.68 1071.98,-430.68 1071.98,-430.68"/>
<polygon fill="black" stroke="black" points="1071.98,-427.18 1061.98,-430.68 1071.98,-434.18 1071.98,-427.18"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1043.25" y="-325.56" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
<text xml:space="preserve" text-anchor="middle" x="1043.25" y="-313.56" font-family="Arial" font-size="10.00">{ psd_image_b64, coherence_image_b64, timestamp }</text>
</g>
<!-- MinIO&#45;&gt;BIDSExporterService -->
<g id="edge9" class="edge">
<title>MinIO&#45;&gt;BIDSExporterService</title>
<g id="a_edge9"><a xlink:title="Schema: セッションに対応する生データオブジェクト群">
<path fill="none" stroke="black" d="M1743.61,-128.27C1657.85,-128.27 1542,-128.27 1542,-128.27 1542,-128.27 1542,-447 1542,-447 1542,-447 1503.76,-447 1503.76,-447"/>
<polygon fill="black" stroke="black" points="1503.76,-443.5 1493.76,-447 1503.76,-450.5 1503.76,-443.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1376.62" y="-196.45" font-family="Arial" font-size="10.00">Object GET</text>
<text xml:space="preserve" text-anchor="middle" x="1376.62" y="-184.45" font-family="Arial" font-size="10.00">セッションに対応する生データオブジェクト群</text>
</g>
<!-- PostgreSQL&#45;&gt;SessionManagerService -->
<g id="edge16" class="edge">
<title>PostgreSQL&#45;&gt;SessionManagerService</title>
<g id="a_edge16"><a xlink:title="Schema: 各種メタデータの読み出し">
<path fill="none" stroke="black" d="M1743.53,-310.45C1694.17,-310.45 1643,-310.45 1643,-310.45 1643,-310.45 1643,-602.15 1643,-602.15 1643,-602.15 1503.94,-602.15 1503.94,-602.15"/>
<polygon fill="black" stroke="black" points="1503.94,-598.65 1493.94,-602.15 1503.94,-605.65 1503.94,-598.65"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1737.5" y="-466.06" font-family="Arial" font-size="10.00">SQL SELECT</text>
<text xml:space="preserve" text-anchor="middle" x="1737.5" y="-454.06" font-family="Arial" font-size="10.00">各種メタデータの読み出し</text>
</g>
<!-- PostgreSQL&#45;&gt;BIDSExporterService -->
<g id="edge8" class="edge">
<title>PostgreSQL&#45;&gt;BIDSExporterService</title>
<g id="a_edge8"><a xlink:title="Schema: 指定された`experiment_id`に属する全てのセッションメタデータ">
<path fill="none" stroke="black" d="M1743.7,-324.7C1617.06,-324.7 1402,-324.7 1402,-324.7 1402,-324.7 1402,-392.02 1402,-392.02"/>
<polygon fill="black" stroke="black" points="1398.5,-392.02 1402,-402.02 1405.5,-392.02 1398.5,-392.02"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1332.56" y="-339.2" font-family="Arial" font-size="10.00">SQL SELECT</text>
<text xml:space="preserve" text-anchor="middle" x="1332.56" y="-327.2" font-family="Arial" font-size="10.00">指定された`experiment_id`に属する全てのセッションメタデータ</text>
</g>
<!-- SessionManagerService&#45;&gt;PostgreSQL -->
<g id="edge15" class="edge">
<title>SessionManagerService&#45;&gt;PostgreSQL</title>
<g id="a_edge15"><a xlink:title="Schema: 実験、セッション情報">
<path fill="none" stroke="black" d="M1492.47,-606.5C1541.83,-606.5 1593,-606.5 1593,-606.5 1593,-606.5 1593,-338.95 1593,-338.95 1593,-338.95 1732.06,-338.95 1732.06,-338.95"/>
<polygon fill="black" stroke="black" points="1732.06,-342.45 1742.06,-338.95 1732.06,-335.45 1732.06,-342.45"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1671.75" y="-443.96" font-family="Arial" font-size="10.00">SQL INSERT/UPDATE</text>
<text xml:space="preserve" text-anchor="middle" x="1671.75" y="-431.96" font-family="Arial" font-size="10.00">実験、セッション情報</text>
</g>
<!-- DataLinkageWorker -->
<g id="node15" class="node">
<title>DataLinkageWorker</title>
<g id="a_node15"><a xlink:title="Asynchronous worker for data linkage">
<path fill="#fff3cd" stroke="black" d="M1912,-615.2C1912,-615.2 1756,-615.2 1756,-615.2 1750,-615.2 1744,-609.2 1744,-603.2 1744,-603.2 1744,-540.8 1744,-540.8 1744,-534.8 1750,-528.8 1756,-528.8 1756,-528.8 1912,-528.8 1912,-528.8 1918,-528.8 1924,-534.8 1924,-540.8 1924,-540.8 1924,-603.2 1924,-603.2 1924,-609.2 1918,-615.2 1912,-615.2"/>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-574.85" font-family="Arial" font-size="12.00">Async Task Queue</text>
<text xml:space="preserve" text-anchor="middle" x="1834" y="-560.6" font-family="Arial" font-size="12.00">(DataLinker)</text>
</a>
</g>
</g>
<!-- SessionManagerService&#45;&gt;DataLinkageWorker -->
<g id="edge22" class="edge">
<title>SessionManagerService&#45;&gt;DataLinkageWorker</title>
<g id="a_edge22"><a xlink:title="Schema: データ紐付け処理のタスク">
<path fill="none" stroke="black" d="M1492.3,-610.85C1492.3,-610.85 1732.31,-610.85 1732.31,-610.85"/>
<polygon fill="black" stroke="black" points="1732.31,-614.35 1742.31,-610.85 1732.31,-607.35 1732.31,-614.35"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1706.8" y="-624.6" font-family="Arial" font-size="10.00">Job</text>
<text xml:space="preserve" text-anchor="middle" x="1706.8" y="-612.6" font-family="Arial" font-size="10.00">データ紐付け処理のタスク</text>
</g>
<!-- BIDSExporterService&#45;&gt;APIServer -->
<g id="edge10" class="edge">
<title>BIDSExporterService&#45;&gt;APIServer</title>
<g id="a_edge10"><a xlink:title="Schema: BIDS形式のディレクトリ構造を持つデータセット">
<path fill="none" stroke="black" d="M1311.53,-475.32C1262.17,-475.32 1211,-475.32 1211,-475.32 1211,-475.32 1211,-659.4 1211,-659.4 1211,-659.4 1071.94,-659.4 1071.94,-659.4"/>
<polygon fill="black" stroke="black" points="1071.94,-655.9 1061.94,-659.4 1071.94,-662.9 1071.94,-655.9"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1041.5" y="-577.12" font-family="Arial" font-size="10.00">BIDS</text>
<text xml:space="preserve" text-anchor="middle" x="1041.5" y="-565.12" font-family="Arial" font-size="10.00">BIDS形式のディレクトリ構造を持つデータセット</text>
</g>
<!-- DataLinkageWorker&#45;&gt;PostgreSQL -->
<g id="edge14" class="edge">
<title>DataLinkageWorker&#45;&gt;PostgreSQL</title>
<g id="a_edge14"><a xlink:title="Schema: セッションとオブジェクトIDの関連付け">
<path fill="none" stroke="black" d="M1834,-528.44C1834,-528.44 1834,-365.18 1834,-365.18"/>
<polygon fill="black" stroke="black" points="1837.5,-365.18 1834,-355.18 1830.5,-365.18 1837.5,-365.18"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1973.12" y="-437.31" font-family="Arial" font-size="10.00">SQL UPDATE</text>
<text xml:space="preserve" text-anchor="middle" x="1973.12" y="-425.31" font-family="Arial" font-size="10.00">セッションとオブジェクトIDの関連付け</text>
</g>
</g>
</svg>
