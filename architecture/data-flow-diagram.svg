<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.2 (20250808.2320)
 -->
<!-- Pages: 1 -->
<svg width="1215pt" height="621pt"
 viewBox="0.00 0.00 1215.00 621.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 616.5)">
<polygon fill="white" stroke="none" points="-4,4 -4,-616.5 1210.75,-616.5 1210.75,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="603.38" y="-589.5" font-family="Times New Roman,serif" font-size="20.00">Interactive Data Flow Diagram</text>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M287.62,-8C287.62,-8 379.62,-8 379.62,-8 385.62,-8 391.62,-14 391.62,-20 391.62,-20 391.62,-169 391.62,-169 391.62,-175 385.62,-181 379.62,-181 379.62,-181 287.62,-181 287.62,-181 281.62,-181 275.62,-175 275.62,-169 275.62,-169 275.62,-20 275.62,-20 275.62,-14 281.62,-8 287.62,-8"/>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-161.8" font-family="Times New Roman,serif" font-size="16.00">External Actors</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M282.62,-314C282.62,-314 385.62,-314 385.62,-314 391.62,-314 397.62,-320 397.62,-326 397.62,-326 397.62,-381 397.62,-381 397.62,-387 391.62,-393 385.62,-393 385.62,-393 282.62,-393 282.62,-393 276.62,-393 270.62,-387 270.62,-381 270.62,-381 270.62,-326 270.62,-326 270.62,-320 276.62,-314 282.62,-314"/>
<text xml:space="preserve" text-anchor="middle" x="334.12" y="-373.8" font-family="Times New Roman,serif" font-size="16.00">External Services</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_2</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M552.25,-210C552.25,-210 650.25,-210 650.25,-210 656.25,-210 662.25,-216 662.25,-222 662.25,-222 662.25,-277 662.25,-277 662.25,-283 656.25,-289 650.25,-289 650.25,-289 552.25,-289 552.25,-289 546.25,-289 540.25,-283 540.25,-277 540.25,-277 540.25,-222 540.25,-222 540.25,-216 546.25,-210 552.25,-210"/>
<text xml:space="preserve" text-anchor="middle" x="601.25" y="-269.8" font-family="Times New Roman,serif" font-size="16.00">Mobile Client</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_3</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M20,-401C20,-401 654.75,-401 654.75,-401 660.75,-401 666.75,-407 666.75,-413 666.75,-413 666.75,-562 666.75,-562 666.75,-568 660.75,-574 654.75,-574 654.75,-574 20,-574 20,-574 14,-574 8,-568 8,-562 8,-562 8,-413 8,-413 8,-407 14,-401 20,-401"/>
<text xml:space="preserve" text-anchor="middle" x="337.38" y="-554.8" font-family="Times New Roman,serif" font-size="16.00">API &amp; Data Ingestion</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_4</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M806.75,-400C806.75,-400 927,-400 927,-400 933,-400 939,-406 939,-412 939,-412 939,-561 939,-561 939,-567 933,-573 927,-573 927,-573 806.75,-573 806.75,-573 800.75,-573 794.75,-567 794.75,-561 794.75,-561 794.75,-412 794.75,-412 794.75,-406 800.75,-400 806.75,-400"/>
<text xml:space="preserve" text-anchor="middle" x="866.88" y="-553.8" font-family="Times New Roman,serif" font-size="16.00">Backend Processing</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_5</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M818.88,-211C818.88,-211 913.88,-211 913.88,-211 919.88,-211 925.88,-217 925.88,-223 925.88,-223 925.88,-373 925.88,-373 925.88,-379 919.88,-385 913.88,-385 913.88,-385 818.88,-385 818.88,-385 812.88,-385 806.88,-379 806.88,-373 806.88,-373 806.88,-223 806.88,-223 806.88,-217 812.88,-211 818.88,-211"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-365.8" font-family="Times New Roman,serif" font-size="16.00">Storage Layer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_6</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M815.5,-23C815.5,-23 1186.75,-23 1186.75,-23 1192.75,-23 1198.75,-29 1198.75,-35 1198.75,-35 1198.75,-184 1198.75,-184 1198.75,-190 1192.75,-196 1186.75,-196 1186.75,-196 815.5,-196 815.5,-196 809.5,-196 803.5,-190 803.5,-184 803.5,-184 803.5,-35 803.5,-35 803.5,-29 809.5,-23 815.5,-23"/>
<text xml:space="preserve" text-anchor="middle" x="1001.12" y="-176.8" font-family="Times New Roman,serif" font-size="16.00">Management &amp; Export</text>
</g>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<g id="a_node1"><a xlink:title="System User">
<path fill="#e3f2fd" stroke="black" d="M348.62,-52C348.62,-52 318.62,-52 318.62,-52 312.62,-52 306.62,-46 306.62,-40 306.62,-40 306.62,-28 306.62,-28 306.62,-22 312.62,-16 318.62,-16 318.62,-16 348.62,-16 348.62,-16 354.62,-16 360.62,-22 360.62,-28 360.62,-28 360.62,-40 360.62,-40 360.62,-46 354.62,-52 348.62,-52"/>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-29.73" font-family="Arial" font-size="12.00">User</text>
</a>
</g>
</g>
<!-- SmartphoneApp -->
<g id="node4" class="node">
<title>SmartphoneApp</title>
<g id="a_node4"><a xlink:title="ユーザーインターフェースを提供し、ファームウェアとサーバー群を繋ぐ中継ハブ。">
<path fill="#e8f5e9" stroke="black" d="M642.25,-254C642.25,-254 560.25,-254 560.25,-254 554.25,-254 548.25,-248 548.25,-242 548.25,-242 548.25,-230 548.25,-230 548.25,-224 554.25,-218 560.25,-218 560.25,-218 642.25,-218 642.25,-218 648.25,-218 654.25,-224 654.25,-230 654.25,-230 654.25,-242 654.25,-242 654.25,-248 648.25,-254 642.25,-254"/>
<text xml:space="preserve" text-anchor="middle" x="601.25" y="-231.72" font-family="Arial" font-size="12.00">Smartphone App</text>
</a>
</g>
</g>
<!-- User&#45;&gt;SmartphoneApp -->
<g id="edge2" class="edge">
<title>User&#45;&gt;SmartphoneApp</title>
<g id="a_edge2"><a xlink:title="Schema: 実験開始/終了、実験ID選択など">
<path fill="none" stroke="black" d="M360.87,-46.75C425.7,-46.75 583.75,-46.75 583.75,-46.75 583.75,-46.75 583.75,-206 583.75,-206"/>
<polygon fill="black" stroke="black" points="580.25,-206 583.75,-216 587.25,-206 580.25,-206"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="530.93" y="-37.25" font-family="Arial" font-size="10.00">UI操作</text>
</g>
<!-- BIDSExporterService -->
<g id="node14" class="node">
<title>BIDSExporterService</title>
<g id="a_node14"><a xlink:title="指定された実験データをBIDS形式に準拠した形でエクスポートするバッチ処理サービス。">
<path fill="white" stroke="black" d="M900.62,-67C900.62,-67 832.12,-67 832.12,-67 826.12,-67 820.12,-61 820.12,-55 820.12,-55 820.12,-43 820.12,-43 820.12,-37 826.12,-31 832.12,-31 832.12,-31 900.62,-31 900.62,-31 906.62,-31 912.62,-37 912.62,-43 912.62,-43 912.62,-55 912.62,-55 912.62,-61 906.62,-67 900.62,-67"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-44.73" font-family="Arial" font-size="12.00">BIDS Exporter</text>
</a>
</g>
</g>
<!-- User&#45;&gt;BIDSExporterService -->
<g id="edge7" class="edge">
<title>User&#45;&gt;BIDSExporterService</title>
<g id="a_edge7"><a xlink:title="Schema: { experiment_id }">
<path fill="none" stroke="black" d="M360.78,-41.5C360.78,-41.5 808.3,-41.5 808.3,-41.5"/>
<polygon fill="black" stroke="black" points="808.3,-45 818.3,-41.5 808.3,-38 808.3,-45"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="630.66" y="-44" font-family="Arial" font-size="10.00">HTTP POST (JSON)</text>
</g>
<!-- Firmware_BLE -->
<g id="node2" class="node">
<title>Firmware_BLE</title>
<g id="a_node2"><a xlink:title="Data acquisition firmware">
<path fill="#e3f2fd" stroke="black" d="M371.62,-146C371.62,-146 295.62,-146 295.62,-146 289.62,-146 283.62,-140 283.62,-134 283.62,-134 283.62,-122 283.62,-122 283.62,-116 289.62,-110 295.62,-110 295.62,-110 371.62,-110 371.62,-110 377.62,-110 383.62,-116 383.62,-122 383.62,-122 383.62,-134 383.62,-134 383.62,-140 377.62,-146 371.62,-146"/>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-123.72" font-family="Arial" font-size="12.00">Firmware (BLE)</text>
</a>
</g>
</g>
<!-- Firmware_BLE&#45;&gt;SmartphoneApp -->
<g id="edge1" class="edge">
<title>Firmware_BLE&#45;&gt;SmartphoneApp</title>
<g id="a_edge1"><a xlink:title="Schema: Zstandard圧縮されたバイナリデータ">
<path fill="none" stroke="black" d="M379.75,-146.16C379.75,-174.74 379.75,-227 379.75,-227 379.75,-227 536.4,-227 536.4,-227"/>
<polygon fill="black" stroke="black" points="536.4,-230.5 546.4,-227 536.4,-223.5 536.4,-230.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="332.53" y="-217.5" font-family="Arial" font-size="10.00">BLE Notify (Compressed Sensor Data)</text>
</g>
<!-- APIServer -->
<g id="node3" class="node">
<title>APIServer</title>
<g id="a_node3"><a xlink:title="Third&#45;party or external APIs">
<path fill="#e3f2fd" stroke="black" d="M363,-358C363,-358 304.25,-358 304.25,-358 298.25,-358 292.25,-352 292.25,-346 292.25,-346 292.25,-334 292.25,-334 292.25,-328 298.25,-322 304.25,-322 304.25,-322 363,-322 363,-322 369,-322 375,-328 375,-334 375,-334 375,-346 375,-346 375,-352 369,-358 363,-358"/>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-335.73" font-family="Arial" font-size="12.00">External API</text>
</a>
</g>
</g>
<!-- APIServer&#45;&gt;SmartphoneApp -->
<g id="edge3" class="edge">
<title>APIServer&#45;&gt;SmartphoneApp</title>
<g id="a_edge3"><a xlink:title="Schema: リアルタイム解析結果、実験リストなど">
<path fill="none" stroke="black" d="M333.75,-321.68C333.75,-294.08 333.75,-245 333.75,-245 333.75,-245 536.25,-245 536.25,-245"/>
<polygon fill="black" stroke="black" points="536.25,-248.5 546.25,-245 536.25,-241.5 536.25,-248.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="383.16" y="-235.5" font-family="Arial" font-size="10.00">JSON</text>
</g>
<!-- CollectorService -->
<g id="node5" class="node">
<title>CollectorService</title>
<g id="a_node5"><a xlink:title="全生データの受信を一手に引き受ける、スケーラブルなAPIゲートウェイ。">
<path fill="white" stroke="black" d="M111.5,-448C111.5,-448 28,-448 28,-448 22,-448 16,-442 16,-436 16,-436 16,-424 16,-424 16,-418 22,-412 28,-412 28,-412 111.5,-412 111.5,-412 117.5,-412 123.5,-418 123.5,-424 123.5,-424 123.5,-436 123.5,-436 123.5,-442 117.5,-448 111.5,-448"/>
<text xml:space="preserve" text-anchor="middle" x="69.75" y="-425.73" font-family="Arial" font-size="12.00">Collector Service</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;CollectorService -->
<g id="edge4" class="edge">
<title>SmartphoneApp&#45;&gt;CollectorService</title>
<g id="a_edge4"><a xlink:title="Schema: { user_id, payload_base64 }">
<path fill="none" stroke="black" d="M547.85,-236C413.07,-236 69.75,-236 69.75,-236 69.75,-236 69.75,-400.24 69.75,-400.24"/>
<polygon fill="black" stroke="black" points="66.25,-400.24 69.75,-410.24 73.25,-400.24 66.25,-400.24"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="180.56" y="-226.5" font-family="Arial" font-size="10.00">HTTP POST (JSON)</text>
</g>
<!-- ProcessorService -->
<g id="node9" class="node">
<title>ProcessorService</title>
<g id="a_node9"><a xlink:title="生データを解凍・整形し、オブジェクトストレージに永続化するバックエンドサービス。">
<path fill="white" stroke="black" d="M911.12,-444C911.12,-444 821.62,-444 821.62,-444 815.62,-444 809.62,-438 809.62,-432 809.62,-432 809.62,-420 809.62,-420 809.62,-414 815.62,-408 821.62,-408 821.62,-408 911.12,-408 911.12,-408 917.12,-408 923.12,-414 923.12,-420 923.12,-420 923.12,-432 923.12,-432 923.12,-438 917.12,-444 911.12,-444"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-421.73" font-family="Arial" font-size="12.00">Processor Service</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;ProcessorService -->
<g id="edge18" class="edge">
<title>SmartphoneApp&#45;&gt;ProcessorService</title>
<g id="a_edge18"><a xlink:title="Schema: 時刻同期オフセット情報、メディアファイル">
<path fill="none" stroke="black" d="M654.69,-233.86C681.66,-233.86 708.75,-233.86 708.75,-233.86 708.75,-233.86 708.75,-426.5 708.75,-426.5 708.75,-426.5 797.96,-426.5 797.96,-426.5"/>
<polygon fill="black" stroke="black" points="797.96,-430 807.96,-426.5 797.96,-423 797.96,-430"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="680.62" y="-338.25" font-family="Arial" font-size="10.00">HTTP POST</text>
</g>
<!-- RealtimeAnalyzerService -->
<g id="node10" class="node">
<title>RealtimeAnalyzerService</title>
<g id="a_node10"><a xlink:title="生データをリアルタイムに解析し、結果をAPI経由で提供するサービス。">
<path fill="white" stroke="black" d="M911.5,-538C911.5,-538 821.25,-538 821.25,-538 815.25,-538 809.25,-532 809.25,-526 809.25,-526 809.25,-514 809.25,-514 809.25,-508 815.25,-502 821.25,-502 821.25,-502 911.5,-502 911.5,-502 917.5,-502 923.5,-508 923.5,-514 923.5,-514 923.5,-526 923.5,-526 923.5,-532 917.5,-538 911.5,-538"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-515.73" font-family="Arial" font-size="12.00">Realtime Analyzer</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;RealtimeAnalyzerService -->
<g id="edge6" class="edge">
<title>SmartphoneApp&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge6"><a xlink:title="Schema: 自身のユーザーIDに紐づく解析結果の要求">
<path fill="none" stroke="black" d="M654.6,-243.93C666.54,-243.93 675.75,-243.93 675.75,-243.93 675.75,-243.93 675.75,-511.75 675.75,-511.75 675.75,-511.75 797.41,-511.75 797.41,-511.75"/>
<polygon fill="black" stroke="black" points="797.41,-515.25 807.41,-511.75 797.41,-508.25 797.41,-515.25"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="718.5" y="-418.59" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
</g>
<!-- MinIO -->
<g id="node11" class="node">
<title>MinIO</title>
<g id="a_node11"><a xlink:title="全ての生データ（EEG/IMU, 画像, 音声など）を格納する、スケーラブルなストレージ基盤。">
<path fill="#f8d7da" stroke="black" d="M905.88,-255.25C905.88,-255.25 826.88,-255.25 826.88,-255.25 820.88,-255.25 814.88,-249.25 814.88,-243.25 814.88,-243.25 814.88,-230.75 814.88,-230.75 814.88,-224.75 820.88,-218.75 826.88,-218.75 826.88,-218.75 905.88,-218.75 905.88,-218.75 911.88,-218.75 917.88,-224.75 917.88,-230.75 917.88,-230.75 917.88,-243.25 917.88,-243.25 917.88,-249.25 911.88,-255.25 905.88,-255.25"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-239.85" font-family="Arial" font-size="12.00">MinIO</text>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-225.6" font-family="Arial" font-size="12.00">(Object Storage)</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;MinIO -->
<g id="edge13" class="edge">
<title>SmartphoneApp&#45;&gt;MinIO</title>
<g id="a_edge13"><a xlink:title="Schema: JPEG, WAVなど">
<path fill="none" stroke="black" d="M654.58,-228.82C654.58,-228.82 802.97,-228.82 802.97,-228.82"/>
<polygon fill="black" stroke="black" points="802.97,-232.32 812.97,-228.82 802.97,-225.32 802.97,-232.32"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="793.28" y="-219.32" font-family="Arial" font-size="10.00">画像/音声ファイル</text>
</g>
<!-- SessionManagerService -->
<g id="node13" class="node">
<title>SessionManagerService</title>
<g id="a_node13"><a xlink:title="実験とセッションのメタデータを管理し、ライフサイクルを司るサービス。">
<path fill="white" stroke="black" d="M909.25,-161C909.25,-161 823.5,-161 823.5,-161 817.5,-161 811.5,-155 811.5,-149 811.5,-149 811.5,-137 811.5,-137 811.5,-131 817.5,-125 823.5,-125 823.5,-125 909.25,-125 909.25,-125 915.25,-125 921.25,-131 921.25,-137 921.25,-137 921.25,-149 921.25,-149 921.25,-155 915.25,-161 909.25,-161"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-138.72" font-family="Arial" font-size="12.00">Session Manager</text>
</a>
</g>
</g>
<!-- SmartphoneApp&#45;&gt;SessionManagerService -->
<g id="edge5" class="edge">
<title>SmartphoneApp&#45;&gt;SessionManagerService</title>
<g id="a_edge5"><a xlink:title="Schema: 実験作成リクエスト、セッション終了通知など">
<path fill="none" stroke="black" d="M618.75,-217.71C618.75,-192.39 618.75,-149.75 618.75,-149.75 618.75,-149.75 799.6,-149.75 799.6,-149.75"/>
<polygon fill="black" stroke="black" points="799.6,-153.25 809.6,-149.75 799.6,-146.25 799.6,-153.25"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="617.44" y="-140.25" font-family="Arial" font-size="10.00">HTTP POST/GET (JSON)</text>
</g>
<!-- RawDataExchange -->
<g id="node6" class="node">
<title>RawDataExchange</title>
<g id="a_node6"><a xlink:title="Fanout exchange for data distribution">
<path fill="#fff3cd" stroke="black" d="M387.75,-452.25C387.75,-452.25 279.5,-452.25 279.5,-452.25 273.5,-452.25 267.5,-446.25 267.5,-440.25 267.5,-440.25 267.5,-427.75 267.5,-427.75 267.5,-421.75 273.5,-415.75 279.5,-415.75 279.5,-415.75 387.75,-415.75 387.75,-415.75 393.75,-415.75 399.75,-421.75 399.75,-427.75 399.75,-427.75 399.75,-440.25 399.75,-440.25 399.75,-446.25 393.75,-452.25 387.75,-452.25"/>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-436.85" font-family="Arial" font-size="12.00">RabbitMQ Exchange</text>
<text xml:space="preserve" text-anchor="middle" x="333.62" y="-422.6" font-family="Arial" font-size="12.00">(raw_data_exchange)</text>
</a>
</g>
</g>
<!-- CollectorService&#45;&gt;RawDataExchange -->
<g id="edge11" class="edge">
<title>CollectorService&#45;&gt;RawDataExchange</title>
<g id="a_edge11"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M123.79,-431.88C123.79,-431.88 255.5,-431.88 255.5,-431.88"/>
<polygon fill="black" stroke="black" points="255.5,-435.38 265.5,-431.88 255.5,-428.38 255.5,-435.38"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="225.65" y="-422.38" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessingQueue -->
<g id="node7" class="node">
<title>ProcessingQueue</title>
<g id="a_node7"><a xlink:title="Queue for data persistence tasks">
<path fill="#fff3cd" stroke="black" d="M646.75,-445C646.75,-445 555.75,-445 555.75,-445 549.75,-445 543.75,-439 543.75,-433 543.75,-433 543.75,-421 543.75,-421 543.75,-415 549.75,-409 555.75,-409 555.75,-409 646.75,-409 646.75,-409 652.75,-409 658.75,-415 658.75,-421 658.75,-421 658.75,-433 658.75,-433 658.75,-439 652.75,-445 646.75,-445"/>
<text xml:space="preserve" text-anchor="middle" x="601.25" y="-422.73" font-family="Arial" font-size="12.00">Processing Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;ProcessingQueue -->
<g id="edge19" class="edge">
<title>RawDataExchange&#45;&gt;ProcessingQueue</title>
<g id="a_edge19"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M400.12,-430.38C400.12,-430.38 531.76,-430.38 531.76,-430.38"/>
<polygon fill="black" stroke="black" points="531.76,-433.88 541.76,-430.38 531.76,-426.88 531.76,-433.88"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="501.94" y="-420.88" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- AnalysisQueue -->
<g id="node8" class="node">
<title>AnalysisQueue</title>
<g id="a_node8"><a xlink:title="Queue for real&#45;time analysis tasks">
<path fill="#fff3cd" stroke="black" d="M639.62,-539C639.62,-539 562.88,-539 562.88,-539 556.88,-539 550.88,-533 550.88,-527 550.88,-527 550.88,-515 550.88,-515 550.88,-509 556.88,-503 562.88,-503 562.88,-503 639.62,-503 639.62,-503 645.62,-503 651.62,-509 651.62,-515 651.62,-515 651.62,-527 651.62,-527 651.62,-533 645.62,-539 639.62,-539"/>
<text xml:space="preserve" text-anchor="middle" x="601.25" y="-516.73" font-family="Arial" font-size="12.00">Analysis Queue</text>
</a>
</g>
</g>
<!-- RawDataExchange&#45;&gt;AnalysisQueue -->
<g id="edge20" class="edge">
<title>RawDataExchange&#45;&gt;AnalysisQueue</title>
<g id="a_edge20"><a xlink:title="Fanout distribution">
<path fill="none" stroke="black" d="M400,-448.62C479.11,-448.62 600.75,-448.62 600.75,-448.62 600.75,-448.62 600.75,-491.22 600.75,-491.22"/>
<polygon fill="black" stroke="black" points="597.25,-491.22 600.75,-501.22 604.25,-491.22 597.25,-491.22"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="485.67" y="-439.12" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessingQueue&#45;&gt;ProcessorService -->
<g id="edge17" class="edge">
<title>ProcessingQueue&#45;&gt;ProcessorService</title>
<g id="a_edge17"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M659.11,-435.25C659.11,-435.25 798.04,-435.25 798.04,-435.25"/>
<polygon fill="black" stroke="black" points="798.04,-438.75 808.04,-435.25 798.04,-431.75 798.04,-438.75"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="764.57" y="-437.75" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- AnalysisQueue&#45;&gt;RealtimeAnalyzerService -->
<g id="edge21" class="edge">
<title>AnalysisQueue&#45;&gt;RealtimeAnalyzerService</title>
<g id="a_edge21"><a xlink:title="Schema: Body: バイナリデータ, Headers: { user_id }">
<path fill="none" stroke="black" d="M652.06,-520.5C652.06,-520.5 797.32,-520.5 797.32,-520.5"/>
<polygon fill="black" stroke="black" points="797.32,-524 807.32,-520.5 797.32,-517 797.32,-524"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="688.69" y="-511" font-family="Arial" font-size="10.00">AMQP Message</text>
</g>
<!-- ProcessorService&#45;&gt;MinIO -->
<g id="edge12" class="edge">
<title>ProcessorService&#45;&gt;MinIO</title>
<g id="a_edge12"><a xlink:title="Schema: EEG/IMUデータ">
<path fill="none" stroke="black" d="M809.27,-417.75C776.87,-417.75 742.75,-417.75 742.75,-417.75 742.75,-417.75 742.75,-248.96 742.75,-248.96 742.75,-248.96 803.15,-248.96 803.15,-248.96"/>
<polygon fill="black" stroke="black" points="803.15,-252.46 813.15,-248.96 803.15,-245.46 803.15,-252.46"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="650.12" y="-326.92" font-family="Arial" font-size="10.00">Zstandard圧縮されたバイナリ</text>
</g>
<!-- RealtimeAnalyzerService&#45;&gt;SmartphoneApp -->
<g id="edge22" class="edge">
<title>RealtimeAnalyzerService&#45;&gt;SmartphoneApp</title>
<g id="a_edge22"><a xlink:title="Schema: { psd_image_b64, coherence_image_b64, timestamp }">
<path fill="none" stroke="black" d="M809.2,-529.25C758.27,-529.25 691.75,-529.25 691.75,-529.25 691.75,-529.25 691.75,-238.89 691.75,-238.89 691.75,-238.89 666.19,-238.89 666.19,-238.89"/>
<polygon fill="black" stroke="black" points="666.19,-235.39 656.19,-238.89 666.19,-242.39 666.19,-235.39"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="734.5" y="-432.52" font-family="Arial" font-size="10.00">HTTP GET (JSON)</text>
</g>
<!-- MinIO&#45;&gt;BIDSExporterService -->
<g id="edge9" class="edge">
<title>MinIO&#45;&gt;BIDSExporterService</title>
<g id="a_edge9"><a xlink:title="Schema: セッションに対応する生データオブジェクト群">
<path fill="none" stroke="black" d="M814.44,-223.79C802.26,-223.79 792.75,-223.79 792.75,-223.79 792.75,-223.79 792.75,-62 792.75,-62 792.75,-62 808.23,-62 808.23,-62"/>
<polygon fill="black" stroke="black" points="808.23,-65.5 818.23,-62 808.23,-58.5 808.23,-65.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="766.88" y="-136.5" font-family="Arial" font-size="10.00">Object GET</text>
</g>
<!-- PostgreSQL -->
<g id="node12" class="node">
<title>PostgreSQL</title>
<g id="a_node12"><a xlink:title="全てのメタデータを管理する、信頼性の高いリレーショナルデータベース。">
<path fill="#f8d7da" stroke="black" d="M901,-350.25C901,-350.25 831.75,-350.25 831.75,-350.25 825.75,-350.25 819.75,-344.25 819.75,-338.25 819.75,-338.25 819.75,-325.75 819.75,-325.75 819.75,-319.75 825.75,-313.75 831.75,-313.75 831.75,-313.75 901,-313.75 901,-313.75 907,-313.75 913,-319.75 913,-325.75 913,-325.75 913,-338.25 913,-338.25 913,-344.25 907,-350.25 901,-350.25"/>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-334.85" font-family="Arial" font-size="12.00">PostgreSQL</text>
<text xml:space="preserve" text-anchor="middle" x="866.38" y="-320.6" font-family="Arial" font-size="12.00">(Metadata DB)</text>
</a>
</g>
</g>
<!-- PostgreSQL&#45;&gt;SessionManagerService -->
<g id="edge16" class="edge">
<title>PostgreSQL&#45;&gt;SessionManagerService</title>
<g id="a_edge16"><a xlink:title="Schema: 各種メタデータの読み出し">
<path fill="none" stroke="black" d="M819.48,-319.25C790.48,-319.25 758.75,-319.25 758.75,-319.25 758.75,-319.25 758.75,-153.5 758.75,-153.5 758.75,-153.5 799.79,-153.5 799.79,-153.5"/>
<polygon fill="black" stroke="black" points="799.79,-157 809.79,-153.5 799.79,-150 799.79,-157"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="728" y="-236.72" font-family="Arial" font-size="10.00">SQL SELECT</text>
</g>
<!-- PostgreSQL&#45;&gt;BIDSExporterService -->
<g id="edge8" class="edge">
<title>PostgreSQL&#45;&gt;BIDSExporterService</title>
<g id="a_edge8"><a xlink:title="Schema: 指定された`experiment_id`に属する全てのセッションメタデータ">
<path fill="none" stroke="black" d="M819.55,-336.12C778.64,-336.12 725.75,-336.12 725.75,-336.12 725.75,-336.12 725.75,-57 725.75,-57 725.75,-57 808.43,-57 808.43,-57"/>
<polygon fill="black" stroke="black" points="808.43,-60.5 818.43,-57 808.43,-53.5 808.43,-60.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="695" y="-192.62" font-family="Arial" font-size="10.00">SQL SELECT</text>
</g>
<!-- SessionManagerService&#45;&gt;PostgreSQL -->
<g id="edge15" class="edge">
<title>SessionManagerService&#45;&gt;PostgreSQL</title>
<g id="a_edge15"><a xlink:title="Schema: 実験、セッション情報">
<path fill="none" stroke="black" d="M811.05,-157.25C792.18,-157.25 775.75,-157.25 775.75,-157.25 775.75,-157.25 775.75,-316.5 775.75,-316.5 775.75,-316.5 807.96,-316.5 807.96,-316.5"/>
<polygon fill="black" stroke="black" points="807.96,-320 817.96,-316.5 807.96,-313 807.96,-320"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="724.38" y="-225.83" font-family="Arial" font-size="10.00">SQL INSERT/UPDATE</text>
</g>
<!-- DataLinkageWorker -->
<g id="node15" class="node">
<title>DataLinkageWorker</title>
<g id="a_node15"><a xlink:title="Asynchronous worker for data linkage">
<path fill="#fff3cd" stroke="black" d="M1178.75,-161.25C1178.75,-161.25 1087,-161.25 1087,-161.25 1081,-161.25 1075,-155.25 1075,-149.25 1075,-149.25 1075,-136.75 1075,-136.75 1075,-130.75 1081,-124.75 1087,-124.75 1087,-124.75 1178.75,-124.75 1178.75,-124.75 1184.75,-124.75 1190.75,-130.75 1190.75,-136.75 1190.75,-136.75 1190.75,-149.25 1190.75,-149.25 1190.75,-155.25 1184.75,-161.25 1178.75,-161.25"/>
<text xml:space="preserve" text-anchor="middle" x="1132.88" y="-145.85" font-family="Arial" font-size="12.00">Async Task Queue</text>
<text xml:space="preserve" text-anchor="middle" x="1132.88" y="-131.6" font-family="Arial" font-size="12.00">(DataLinker)</text>
</a>
</g>
</g>
<!-- SessionManagerService&#45;&gt;DataLinkageWorker -->
<g id="edge23" class="edge">
<title>SessionManagerService&#45;&gt;DataLinkageWorker</title>
<g id="a_edge23"><a xlink:title="Schema: データ紐付け処理のタスク">
<path fill="none" stroke="black" d="M921.59,-143C921.59,-143 1063.45,-143 1063.45,-143"/>
<polygon fill="black" stroke="black" points="1063.45,-146.5 1073.45,-143 1063.45,-139.5 1063.45,-146.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="984.65" y="-133.5" font-family="Arial" font-size="10.00">Job</text>
</g>
<!-- BIDSExporterService&#45;&gt;User -->
<g id="edge10" class="edge">
<title>BIDSExporterService&#45;&gt;User</title>
<g id="a_edge10"><a xlink:title="Schema: BIDS形式のディレクトリ構造を持つデータセット">
<path fill="none" stroke="black" d="M820.03,-36.25C820.03,-36.25 372.57,-36.25 372.57,-36.25"/>
<polygon fill="black" stroke="black" points="372.57,-32.75 362.57,-36.25 372.57,-39.75 372.57,-32.75"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="635.67" y="-26.75" font-family="Arial" font-size="10.00">ZIPファイル</text>
</g>
<!-- DataLinkageWorker&#45;&gt;PostgreSQL -->
<g id="edge14" class="edge">
<title>DataLinkageWorker&#45;&gt;PostgreSQL</title>
<g id="a_edge14"><a xlink:title="Schema: セッションとオブジェクトIDの関連付け">
<path fill="none" stroke="black" d="M1132.75,-161.47C1132.75,-209.02 1132.75,-332 1132.75,-332 1132.75,-332 924.9,-332 924.9,-332"/>
<polygon fill="black" stroke="black" points="924.9,-328.5 914.9,-332 924.9,-335.5 924.9,-328.5"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1082.59" y="-322.5" font-family="Arial" font-size="10.00">SQL UPDATE</text>
</g>
</g>
</svg>
